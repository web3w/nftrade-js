import { contractAbi } from '../../../src/contracts/abi'

import {
  AbiDefinition,
  AbiType,
  BlockParam,
  CallData,
  ConstructorAbi,
  ContractAbi,
  DataItem,
  MethodAbi,
  SupportedProvider,
  TransactionReceiptWithDecodedLogs,
  TxData,
  TxDataPayable
} from 'ethereum-types'

import { AbiEncoder,DecodingRules } from '@txdev/0x-utils'

// https://polygonscan.com/tx/0x62c3635e9b5fe1dac35e804aa3a921dbe10f94ad07d8c53a48fc3f42fa6b8b9b
// matchOrders((address,address,address,address,uint256,uint256,uint256,uint256,uint256,uint256,bytes,bytes,bytes,bytes),(address,address,address,address,uint256,uint256,uint256,uint256,uint256,uint256,bytes,bytes,bytes,bytes),bytes,bytes,(address,uint256)[],address) 0xbbbfa60c
const matchOrderInput = '0xbbbfa60c00000000000000000000000000000000000000000000000000000000000000c000000000000000000000000000000000000000000000000000000000000004e0000000000000000000000000000000000000000000000000000000000000092000000000000000000000000000000000000000000000000000000000000009a00000000000000000000000000000000000000000000000000000000000000a200000000000000000000000007ceb23fd6bc0add59e62ac25578270cff1b9f619000000000000000000000000418d66fcabc9dc6d90c3f416dcb93468173de1c80000000000000000000000000000000000000000000000000000000000000000000000000000000000000000f715beb51ec8f63317d66f491e37e7bb048fcc2d000000000000000000000000f715beb51ec8f63317d66f491e37e7bb048fcc2d00000000000000000000000000000000000000000000000000038d7ea4c6800000000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000625d5aee00000000000000000000000000000000000000000000000000f152b2eb5b9ab300000000000000000000000000000000000000000000000000000000000001c0000000000000000000000000000000000000000000000000000000000000022000000000000000000000000000000000000000000000000000000000000003a000000000000000000000000000000000000000000000000000000000000003e00000000000000000000000000000000000000000000000000000000000000024f47261b00000000000000000000000007ceb23fd6bc0add59e62ac25578270cff1b9f619000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000144a7cb5fb70000000000000000000000002953399124f0cbb46d2cbacd8a89cf0599974963000000000000000000000000000000000000000000000000000000000000008000000000000000000000000000000000000000000000000000000000000000c00000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000000136b1a29e0bbd47dfe9dcf7380f276e86da90c4c200000000000001000000000a000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000036b1a29e0bbd47dfe9dcf7380f276e86da90c4c20000000000000000000000000000000000000000000000000000000000000000000000000000000000000000f715beb51ec8f63317d66f491e37e7bb048fcc2d000000000000000000000000f715beb51ec8f63317d66f491e37e7bb048fcc2d000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000038d7ea4c68000000000000000000000000000000000000000000000000000000016bcc41e9000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000625d5aee00000000000000000000000000000000000000000000000000237e127861bd2700000000000000000000000000000000000000000000000000000000000001c0000000000000000000000000000000000000000000000000000000000000034000000000000000000000000000000000000000000000000000000000000003a000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000144a7cb5fb70000000000000000000000002953399124f0cbb46d2cbacd8a89cf0599974963000000000000000000000000000000000000000000000000000000000000008000000000000000000000000000000000000000000000000000000000000000c00000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000000136b1a29e0bbd47dfe9dcf7380f276e86da90c4c200000000000001000000000a0000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000024f47261b00000000000000000000000007ceb23fd6bc0add59e62ac25578270cff1b9f619000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000024f47261b00000000000000000000000007ceb23fd6bc0add59e62ac25578270cff1b9f619000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000421c65c4d9ad7a9d00626a3314a9e7f09a2fbb15e01e43ca65616f73bfc111424eec5fedaef680de7d93527acbcd7a9df117c693c98ccded4495b78b1f87068264760300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000421c725b7e7d3b71ede8ffa9fad4e3671277de1a68cdf1644adfa7475966fa64586a4c1f45d18e541f11bbeeef4c150f17226c11d5f7446e923ccb2392b576326e050300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000010000000000000000000000005b3256965e7c3cf26e11fcaf296dfc8807c01073000000000000000000000000000000000000000000000000000016bcc41e9000'

//matchOrders //0xbbbfa60c

const matchOrderSeleter = matchOrderInput.substring(0,10)

const methodAbis = contractAbi.elementEx.abi.filter(
  (abiDefinition: AbiDefinition) => abiDefinition.type === AbiType.Function
) as MethodAbi[]

methodAbis.find(methodAbi => {
  const abiEncoder = new AbiEncoder.Method(methodAbi)
  const functionSignature = abiEncoder.getSignature()
  const functionSelector = abiEncoder.getSelector()
  console.log(functionSignature, functionSelector)
  if(matchOrderSeleter ==functionSelector){
    // @ts-ignore
    const rules:DecodingRules = {
      shouldConvertStructsToObjects: true,
      isStrictMode: true
    }
    const decodeList =  abiEncoder.decode(matchOrderInput,rules)
    console.log("\n",decodeList ,"\n")
    return false
  }
  return false
})
//
// {
//   leftOrder: {
//     makerAddress: '0x418d66fcabc9dc6d90c3f416dcb93468173de1c8',
//       takerAddress: '0x0000000000000000000000000000000000000000',
//       feeRecipientAddress: '0xf715beb51ec8f63317d66f491e37e7bb048fcc2d',
//       senderAddress: '0xf715beb51ec8f63317d66f491e37e7bb048fcc2d',
//       makerAssetAmount: 1000000000000000,
//       takerAssetAmount: 1,
//       makerFee: 0,
//       takerFee: 0,
//       expirationTimeSeconds: 1650285294,
//       salt: 67926397793573555,
//       makerAssetData: '0xf47261b00000000000000000000000007ceb23fd6bc0add59e62ac25578270cff1b9f619',
//       takerAssetData: '0xa7cb5fb70000000000000000000000002953399124f0cbb46d2cbacd8a89cf0599974963000000000000000000000000000000000000000000000000000000000000008000000000000000000000000000000000000000000000000000000000000000c00000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000000136b1a29e0bbd47dfe9dcf7380f276e86da90c4c200000000000001000000000a0000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000',
//       makerFeeAssetData: '0x',
//       takerFeeAssetData: '0x'
//   },
//   rightOrder: {
//     makerAddress: '0x36b1a29e0bbd47dfe9dcf7380f276e86da90c4c2',
//       takerAddress: '0x0000000000000000000000000000000000000000',
//       feeRecipientAddress: '0xf715beb51ec8f63317d66f491e37e7bb048fcc2d',
//       senderAddress: '0xf715beb51ec8f63317d66f491e37e7bb048fcc2d',
//       makerAssetAmount: 1,
//       takerAssetAmount: 1000000000000000,
//       makerFee: 25000000000000,
//       takerFee: 0,
//       expirationTimeSeconds: 1650285294,
//       salt: 9990241979055399,
//       makerAssetData: '0xa7cb5fb70000000000000000000000002953399124f0cbb46d2cbacd8a89cf0599974963000000000000000000000000000000000000000000000000000000000000008000000000000000000000000000000000000000000000000000000000000000c00000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000000136b1a29e0bbd47dfe9dcf7380f276e86da90c4c200000000000001000000000a0000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000',
//       takerAssetData: '0xf47261b00000000000000000000000007ceb23fd6bc0add59e62ac25578270cff1b9f619',
//       makerFeeAssetData: '0xf47261b00000000000000000000000007ceb23fd6bc0add59e62ac25578270cff1b9f619',
//       takerFeeAssetData: '0x'
//   },
//   leftSignature: '0x1c65c4d9ad7a9d00626a3314a9e7f09a2fbb15e01e43ca65616f73bfc111424eec5fedaef680de7d93527acbcd7a9df117c693c98ccded4495b78b1f870682647603',
//     rightSignature: '0x1c725b7e7d3b71ede8ffa9fad4e3671277de1a68cdf1644adfa7475966fa64586a4c1f45d18e541f11bbeeef4c150f17226c11d5f7446e923ccb2392b576326e0503',
//   feeData: [
//   {
//     recipient: '0x5b3256965e7c3cf26e11fcaf296dfc8807c01073',
//     paymentTokenAmount: 25000000000000
//   }
// ],
//   paymentTokenAddress: '0x7ceb23fd6bc0add59e62ac25578270cff1b9f619'
// }
