import { contractAbi } from '../../../src/contracts/abi'

import {
  AbiDefinition,
  AbiType,
  BlockParam,
  CallData,
  ConstructorAbi,
  ContractAbi,
  DataItem,
  MethodAbi,
  SupportedProvider,
  TransactionReceiptWithDecodedLogs,
  TxData,
  TxDataPayable
} from 'ethereum-types'

import { AbiEncoder,DecodingRules } from '@txdev/0x-utils'

// fillOrder((address,address,address,address,uint256,uint256,uint256,uint256,uint256,uint256,bytes,bytes,bytes,bytes),uint256,bytes) 0x9b44d556
const matchOrderInput = '0x88ec79fb000000000000000000000000000000000000000000000000000000000000008000000000000000000000000000000000000000000000000000000000000003a000000000000000000000000000000000000000000000000000000000000006e00000000000000000000000000000000000000000000000000000000000000760000000000000000000000000a98c1d3c2e5e01371eb7c775d308b6feec01b1d700000000000000000000000000000000000000000000000000000000000000000000000000000000000000005b3256965e7c3cf26e11fcaf296dfc8807c010730000000000000000000000009b814233894cd227f561b78cc65891aa55c62ad2000000000000000000000000000000000000000000000000000e35fa931a0000000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff0000000000000000000000000000000000000000000000000063e9eb7741b37700000000000000000000000000000000000000000000000000000000000001c0000000000000000000000000000000000000000000000000000000000000022000000000000000000000000000000000000000000000000000000000000002a000000000000000000000000000000000000000000000000000000000000002e00000000000000000000000000000000000000000000000000000000000000024f47261b00000000000000000000000007ceb23fd6bc0add59e62ac25578270cff1b9f61900000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000004402571792000000000000000000000000a115dfbb5ab7adffad2f7f25fa7a5c227616c2c300000000000000000000000000000000000000000000000000000000000029ec000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000f2ece13fdd96e865bad9b109cb61244560fe09ba00000000000000000000000000000000000000000000000000000000000000000000000000000000000000005b3256965e7c3cf26e11fcaf296dfc8807c010730000000000000000000000009b814233894cd227f561b78cc65891aa55c62ad20000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000e35fa931a000000000000000000000000000000000000000000000000000000005af3107a40000000000000000000000000000000000000000000000000000000000000000000ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff00000000000000000000000000000000000000000000000000d348621cff7e5100000000000000000000000000000000000000000000000000000000000001c0000000000000000000000000000000000000000000000000000000000000024000000000000000000000000000000000000000000000000000000000000002a00000000000000000000000000000000000000000000000000000000000000300000000000000000000000000000000000000000000000000000000000000004402571792000000000000000000000000a115dfbb5ab7adffad2f7f25fa7a5c227616c2c300000000000000000000000000000000000000000000000000000000000029ec000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000024f47261b00000000000000000000000007ceb23fd6bc0add59e62ac25578270cff1b9f619000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000024f47261b00000000000000000000000007ceb23fd6bc0add59e62ac25578270cff1b9f619000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000421c67b00169fdd40f3042d1941f626b502d03ec8384f7d4a76491d97872d184af6a391e155e4e4dc594350293443b2ac909424d0bad8140f6fb06aa281a7d4f5e640300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000421b921b47d3561395e24d1255c479b067f9475af11a34db69f7baf68bd237e5ae30094ff1e743c2c0946292c98dab6aab80fda7bbb7d17ec5b1899ce1083b18afa503000000000000000000000000000000000000000000000000000000000000'

//matchOrders //0xbbbfa60c

const matchOrderSeleter = matchOrderInput.substring(0,10)

const methodAbis = contractAbi.exchange.abi.filter(
  (abiDefinition: AbiDefinition) => abiDefinition.type === AbiType.Function
) as MethodAbi[]

methodAbis.find(methodAbi => {
  const abiEncoder = new AbiEncoder.Method(methodAbi)
  const functionSignature = abiEncoder.getSignature()
  const functionSelector = abiEncoder.getSelector()
  console.log(functionSignature, functionSelector)
  if(matchOrderSeleter ==functionSelector){
    // @ts-ignore
    const rules:DecodingRules = {
      shouldConvertStructsToObjects: true,
      isStrictMode: true
    }
    const decodeList =  abiEncoder.decode(matchOrderInput,rules)
    console.log("\n",decodeList ,"\n")
    return false
  }
  return false
})

// {
//   leftOrder: {
//     makerAddress: '0xa98c1d3c2e5e01371eb7c775d308b6feec01b1d7',
//       takerAddress: '0x0000000000000000000000000000000000000000',
//       feeRecipientAddress: '0x5b3256965e7c3cf26e11fcaf296dfc8807c01073',
//       senderAddress: '0x9b814233894cd227f561b78cc65891aa55c62ad2',
//       makerAssetAmount: 4000000000000000,
//       takerAssetAmount: 1,
//       makerFee: 0,
//       takerFee: 0,
//       expirationTimeSeconds: 115792089237316195423570985008687907853269984665640564039457584007913129639935,
//       salt: 28123220221735799,
//       makerAssetData: '0xf47261b00000000000000000000000007ceb23fd6bc0add59e62ac25578270cff1b9f619',
//       takerAssetData: '0x02571792000000000000000000000000a115dfbb5ab7adffad2f7f25fa7a5c227616c2c300000000000000000000000000000000000000000000000000000000000029ec',
//       makerFeeAssetData: '0x',
//       takerFeeAssetData: '0x'
//   },
//   rightOrder: {
//     makerAddress: '0xf2ece13fdd96e865bad9b109cb61244560fe09ba',
//       takerAddress: '0x0000000000000000000000000000000000000000',
//       feeRecipientAddress: '0x5b3256965e7c3cf26e11fcaf296dfc8807c01073',
//       senderAddress: '0x9b814233894cd227f561b78cc65891aa55c62ad2',
//       makerAssetAmount: 1,
//       takerAssetAmount: 4000000000000000,
//       makerFee: 100000000000000,
//       takerFee: 0,
//       expirationTimeSeconds: 115792089237316195423570985008687907853269984665640564039457584007913129639935,
//       salt: 59470806316449361,
//       makerAssetData: '0x02571792000000000000000000000000a115dfbb5ab7adffad2f7f25fa7a5c227616c2c300000000000000000000000000000000000000000000000000000000000029ec',
//       takerAssetData: '0xf47261b00000000000000000000000007ceb23fd6bc0add59e62ac25578270cff1b9f619',
//       makerFeeAssetData: '0xf47261b00000000000000000000000007ceb23fd6bc0add59e62ac25578270cff1b9f619',
//       takerFeeAssetData: '0x'
//   },
//   leftSignature: '0x1c67b00169fdd40f3042d1941f626b502d03ec8384f7d4a76491d97872d184af6a391e155e4e4dc594350293443b2ac909424d0bad8140f6fb06aa281a7d4f5e6403',
//     rightSignature: '0x1b921b47d3561395e24d1255c479b067f9475af11a34db69f7baf68bd237e5ae30094ff1e743c2c0946292c98dab6aab80fda7bbb7d17ec5b1899ce1083b18afa503'
// }
